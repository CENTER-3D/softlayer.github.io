<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Managing Image Templates - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/python/Manage_Image_Templates/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/fa-svg-with-js.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>
    <script src="https://sldn.softlayer.com/js/fontawesome-all.js"></script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
		})
	</script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-88235803-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/perl/">Perl</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>June 25, 2020<br></h4>
            </div>
        </div>
        <div class="col-md-9">

                <strong>Classes <span class="fa fa-book"/></strong>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group">SoftLayer_Virtual_Guest_Block_Device_Template_Group</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Location">SoftLayer_Location</a>
                
                <br>
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/imagetemplate">imagetemplate</a>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/template">template</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
		<div class="col-md-12">
            <div class="well well-sm  article" style="word-wrap: break-word;">
                <div class="article-title">
				    <h1>Managing Image Templates</h1>
                    <small>A variety of examples on how to work with Image Templates, aka SoftLayer_Virtual_Guest_Block_Device_Template_Group</small>
                </div>
				
                
				
                <h2 id="create-an-image-template">Create an Image Template</h2>
<p>The script creates a standard image template, it makes
a call to the <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest/createArchiveTransaction">SoftLayer_Virtual_Guest::createArchiveTransaction</a> method
sending the IDs of the disks in the request, the response will provide an ID property which is the Transaction number until the template has been created. 
This will take the Virtual Guest offline for this process.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp


<span style="color:#75715e"># The virtual guest ID you want to create a template</span>
virtualGuestId <span style="color:#f92672">=</span> <span style="color:#ae81ff">39202937</span>
<span style="color:#75715e"># The name of the image template</span>
groupName <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">fmirGroupImageTemplate</span><span style="color:#e6db74">&#39;</span>
<span style="color:#75715e"># An optional note for the image template</span>
note <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">an optional fmir note</span><span style="color:#e6db74">&#39;</span>

<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Build a skeleton SoftLayer_Virtual_Guest_Block_Device object</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">containing the disks you want to the image.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">In this case we are going take an image template of 2 disks</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">from the virtual machine.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span>
blockDevices <span style="color:#f92672">=</span> [
    {<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#34;</span>: <span style="color:#ae81ff">60788837</span>},  <span style="color:#75715e"># &#34;complexType&#34;: &#34;SoftLayer_Virtual_Guest_Block_Device&#34;</span>
    {<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#34;</span>: <span style="color:#ae81ff">59411427</span>},  <span style="color:#75715e"># &#34;complexType&#34;: &#34;SoftLayer_Virtual_Guest_Block_Device&#34;</span>
]

<span style="color:#75715e"># Declare a new API service object</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>create_client_from_env()

<span style="color:#66d9ef">try</span>:
    <span style="color:#75715e"># Creating the transaction for the image template</span>
    response <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest</span><span style="color:#e6db74">&#39;</span>, 
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">createArchiveTransaction</span><span style="color:#e6db74">&#39;</span>,
        groupName,
        blockDevices,
        note,
        id<span style="color:#f92672">=</span>virtualGuestId)
    pp(response)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    # Handle or Print the SoftLayer error if there was one.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Unable to create the image template. </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultCode= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultString= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span>
          <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))

</code></pre></div><h2 id="list-image-templates">List Image Templates</h2>
<h3 id="using-the-python-manager">Using the python manager</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp

<span style="color:#75715e"># Declare a new API service object</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>create_client_from_env()
imageManager <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>ImageManager(client)

<span style="color:#75715e"># Declare variables</span>
object_mask <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">mask[children[blockDevices[diskImage[softwareReferences[softwareDescription]]]]]</span><span style="color:#e6db74">&#34;</span>

result <span style="color:#f92672">=</span> imageManager<span style="color:#f92672">.</span>list_private_images(mask<span style="color:#f92672">=</span>object_mask)
pp(result)


</code></pre></div><h3 id="calling-api-directly">Calling API Directly</h3>
<p>Get private image template</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp

<span style="color:#75715e"># Declare the API client</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>create_client_from_env(Y)

<span style="color:#75715e"># declaring an object mask to get more information about the images templates</span>
objectMask <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">mask[summary, note, status[name],</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">storageRepository[datacenter],</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">transaction[transactionGroup,transactionStatus],</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">children[</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    storageRepository[datacenter],</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    blockDevices[diskImage[type]]</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">]]</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span>


result <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Account</span><span style="color:#e6db74">&#39;</span>,
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getPrivateBlockDeviceTemplateGroups</span><span style="color:#e6db74">&#39;</span>,
    mask<span style="color:#f92672">=</span>objectMask
)
pp(result)


</code></pre></div><h3 id="important-manual-pages">Important Manual Pages</h3>
<ul>
<li><a href="https://softlayer-python.readthedocs.io/en/latest/api/managers/image/#SoftLayer.managers.image.ImageManager.list_private_images">ImageManager</a></li>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Account/getPrivateBlockDeviceTemplateGroups">SoftLayer_Account::getPrivateBlockDeviceTemplateGroups()</a></li>
</ul>
<h2 id="update-locations">Update Locations</h2>
<p>This will enable an Image Template in a selected datacenter. This is useful to do if you need to provision anything with this template, in the seleceted datacenter.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Update Locations</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">The script create(s) transaction(s) to set the archived block device available locations.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Important manual pages:</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span>
<span style="color:#f92672">import</span> SoftLayer

<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp

<span style="color:#75715e"># The virtual guest ID you want to create a template</span>
imageTemplateId <span style="color:#f92672">=</span> <span style="color:#ae81ff">1796623</span>

<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Build a skeleton of SoftLayer_Location array containing the locations identifiers.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">This locations can be obtained by using </span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group::getStorageLocations method.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span>
locations <span style="color:#f92672">=</span> [
    {<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#34;</span>: <span style="color:#ae81ff">265592</span> },  <span style="color:#75715e"># Amsterdam 1</span>
    {<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#34;</span>: <span style="color:#ae81ff">1004997</span>},  <span style="color:#75715e"># Chennai 1</span>
    {<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#34;</span>: <span style="color:#ae81ff">138124</span>},   <span style="color:#75715e"># Dallas 5 </span>
]

<span style="color:#75715e"># Declare a new API service object</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>create_client_from_env()

<span style="color:#66d9ef">try</span>:
    <span style="color:#75715e"># Creating the transaction to update locations on image template</span>
    response <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
            <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>,
            <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">setAvailableLocations</span><span style="color:#e6db74">&#39;</span>, 
            locations,
            id<span style="color:#f92672">=</span>imageTemplateId
    )
    pp(response)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    # Handle and Print any API errors</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Unable to update the locations. </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultCode= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultString= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span>
          <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))

</code></pre></div><h3 id="important-manual-pages1">Important Manual Pages</h3>
<ul>
<li><a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Virtual_Guest_Block_Device_Template_Group/setAvailableLocations">SoftLayer_Virtual_Guest_Block_Device_Template_Group::setAvailableLocations()</a></li>
<li><a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Location">SoftLayer_Location</a></li>
<li><a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Virtual_Guest_Block_Device_Template_Group">SoftLayer_Virtual_Guest_Block_Device_Template_Group</a></li>
</ul>
<h2 id="image-from-external-source">Image from External Source</h2>
<p>This script creates a transaction to import a disk image from an external source and creates a standard image template</p>
<p>Use <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest/getCreateObjectOptions/">SoftLayer_Virtual_Guest::getCreateObjectOptions()</a> for a list of <code>operatingSystemReferenceCode</code> options.</p>
<p>For IBM Cloud Object Storage, use <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group/copyFromIcos/">SoftLayer_Virtual_Guest_Block_Device_Template_Group::copyFromIcos()</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Create Image Template from external source</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span>
<span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp

<span style="color:#75715e"># Declare the group name to be applied to the imported template</span>
name <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">imageTemplateTest</span><span style="color:#e6db74">&#39;</span>
<span style="color:#75715e"># Declare the note to be applied to the imported template</span>
note <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">An optional note</span><span style="color:#e6db74">&#39;</span>

<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;&#39;&#39;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Declare referenceCode of the operating system software description for the imported VHD</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Some Examples: </span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">CENTOS_6_32, CENTOS_6_64, CENTOS_7_64,</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">REDHAT_6_32, REDHAT_6_64, REDHAT_7_64,</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">UBUNTU_12_32, UBUNTU_12_64, UBUNTU_14_32, UBUNTU_14_64,</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">WIN_2003-STD-SP2-5_32, WIN_2003-STD-SP2-5_64,</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">WIN_2008-STD-R2-SP1_64, WIN_2012-STD_64.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;&#39;&#39;</span>
operatingSystemReferenceCode <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">CENTOS_6_64</span><span style="color:#e6db74">&#39;</span>

<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;&#39;&#39;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Define the parameters below, which refers to object storage where the image template is stored. </span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">It will help to build the uri.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;&#39;&#39;</span>
<span style="color:#75715e"># Declare the object storage account name</span>
objectStorageAccountName <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SLOS307608-10</span><span style="color:#e6db74">&#39;</span>
<span style="color:#75715e"># Declare the cluster name where the image is stored</span>
clusterName <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">dal05</span><span style="color:#e6db74">&#39;</span>
<span style="color:#75715e"># Declare the container name where the image is stored</span>
containerName <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">OS</span><span style="color:#e6db74">&#39;</span>
<span style="color:#75715e"># Declare the file name of the image stored in the object storage, it should be .vhd or </span>
fileName <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">testImage2.vhd-0.vhd</span><span style="color:#e6db74">&#39;</span>

<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Creating an SoftLayer_Container_Virtual_Guest_block_Device_Template_Configuration Skeleton</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">which contains the information from external source</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span>
configuration <span style="color:#f92672">=</span> {
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">name</span><span style="color:#e6db74">&#39;</span>: name,
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">note</span><span style="color:#e6db74">&#39;</span>: note,
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">operatingSystemReferenceCode</span><span style="color:#e6db74">&#39;</span>: operatingSystemReferenceCode,
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">uri</span><span style="color:#e6db74">&#39;</span>: <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">swift://</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> objectStorageAccountName <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">@</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> clusterName <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">/</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> containerName <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">/</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> fileName
}

<span style="color:#75715e"># Declare the API client</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>create_client_from_env()

<span style="color:#66d9ef">try</span>:
    result <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>, 
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">createFromExternalSource</span><span style="color:#e6db74">&#39;</span>,
        configuration
    )
    pp(result)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Unable to create the image template from external source: </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultCode= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultString= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span>
          <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))
    exit(<span style="color:#ae81ff">1</span>)

</code></pre></div><h3 id="important-manual-pages2">Important manual pages:</h3>
<ul>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group/createFromExternalSource">SoftLayer_Virtual_Guest_Block_Device_Template_Group::createFromExternalSource()</a></li>
<li><a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Container_Virtual_Guest_Block_Device_Template_Configuration">SoftLayer_Container_Virtual_Guest_Block_Device_Template_Configuration</a></li>
<li><a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Virtual_Guest_Block_Device_Template_Group">SoftLayer_Virtual_Guest_Block_Device_Template_Group</a></li>
</ul>
<h2 id="copy-to-external-source">Copy To External Source</h2>
<p>This will take an existing Image Template, and copy it to an object storage repository.</p>
<p>For IBM Cloud Object Storage, use <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group/copyToIcos/">SoftLayer_Virtual_Guest_Block_Device_Template_Group::copyToIcos()</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer

<span style="color:#75715e"># Declare the image template identifier that you wish to export</span>
imageTemplateId <span style="color:#f92672">=</span> <span style="color:#ae81ff">1796405</span>

<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;&#39;&#39;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Define the parameters below, which refers to object storage where the image template will be copied.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">It will help to build the uri.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;&#39;&#39;</span>
<span style="color:#75715e"># Declare the object storage account name</span>
objectStorageAccountName <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SLOS307608-10</span><span style="color:#e6db74">&#39;</span>
<span style="color:#75715e"># Declare the cluster name where the image will be copied</span>
clusterName <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">dal05</span><span style="color:#e6db74">&#39;</span>
<span style="color:#75715e"># Declare the container name where the image will be copied</span>
containerName <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">OS</span><span style="color:#e6db74">&#39;</span>
<span style="color:#75715e"># Declare the file name of the image stored in the object storage, it should be .vhd or </span>
fileName <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">testImage4f.iso</span><span style="color:#e6db74">&#39;</span>

<span style="color:#75715e"># Declare the API client</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>create_client_from_env()
groupService <span style="color:#f92672">=</span> client[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>]

<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Creating an SoftLayer_Container_Virtual_Guest_block_Device_Template_Configuration Skeleton</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span>
configuration <span style="color:#f92672">=</span> {
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">uri</span><span style="color:#e6db74">&#39;</span>: <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">swift://</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> objectStorageAccountName <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">@</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> clusterName <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">/</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> containerName <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">/</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> fileName
}

<span style="color:#66d9ef">try</span>:
    result <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">copyToExternalSource</span><span style="color:#e6db74">&#39;</span>,
        configuration,
        id<span style="color:#f92672">=</span>imageTemplateId
    )
    <span style="color:#66d9ef">print</span>(result)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Unable to copy: </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultCode= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultString= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#39;</span>
          <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))
    exit(<span style="color:#ae81ff">1</span>)

</code></pre></div><h3 id="important-manual-pages3">Important manual pages:</h3>
<ul>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group/createFromExternalSource">SoftLayer_Virtual_Guest_Block_Device_Template_Group::copyToExternalSource()</a></li>
</ul>
<h2 id="delete-image-template">Delete Image Template</h2>
<p>Removes an image template from your account by making an API call to <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group/deleteObject">SoftLayer_Virtual_Guest_Block_Device_Template_Group::deleteObject</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer

<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">The image template which you wish to delete</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">To get the list of images templates in your account </span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">call the SoftLayer_Account::getPrivateBlockDeviceTemplateGroups method</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span>
imageTemplateId <span style="color:#f92672">=</span> <span style="color:#ae81ff">1796335</span>

<span style="color:#75715e"># Declare the API client</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>create_client_from_env()
blockDeviceTemplateGroupService <span style="color:#f92672">=</span> client[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>]

<span style="color:#66d9ef">try</span>:
    <span style="color:#75715e"># Calling the getObject to delete the image template</span>
    result <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">deleteObject</span><span style="color:#e6db74">&#39;</span>,
        id<span style="color:#f92672">=</span>imageTemplateId
    )
    <span style="color:#66d9ef">print</span>(result)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    # Handle SoftLayer API Errors, if any..</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Unable to delete the image template. </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultCode= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultString= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span>
          <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))

</code></pre></div><h3 id="important-manual-pages4">Important Manual Pages</h3>
<ul>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Account/getPrivateBlockDeviceTemplateGroups">SoftLayer_Account::getPrivateBlockDeviceTemplateGroups</a></li>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group/deleteObject">SoftLayer_Virtual_Guest_Block_Device_Template_Group::deleteObject</a></li>
</ul>
<h2 id="addremove-byol-os-license-attribute">Add/Remove BYOL OS License Attribute</h2>
<p>This script will Add or Remove the BYOL attribute from an Image template.</p>
<p>A template with the BYOL attribute will require you to provide a license after installation.
A template without the BYOL attribute will have a license provided by IBM, possibly at an additional cost.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp

<span style="color:#75715e"># The image template which you wish more details</span>
imageTemplateId <span style="color:#f92672">=</span> <span style="color:#ae81ff">1797793</span>

<span style="color:#75715e"># Declaring the API client</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>create_client_from_env()

<span style="color:#66d9ef">try</span>:
    <span style="color:#75715e"># calling the deleteByolAttribute to remove OS License, this will return a boolean.</span>

    <span style="color:#75715e">## REMOVE</span>
    result <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">deleteByolAttribute</span><span style="color:#e6db74">&#39;</span>
        id<span style="color:#f92672">=</span>imageTemplateId
    )

    <span style="color:#75715e">## ADD</span>
    result <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">addByolAttribute</span><span style="color:#e6db74">&#39;</span>
        id<span style="color:#f92672">=</span>imageTemplateId
    )

    pp(result)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    # Handle SoftLayer API errors</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Unable to remove OS License (BYOL) on image template: </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultCode= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultString= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span>
          <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))

</code></pre></div><h3 id="important-manual-pages5">Important Manual Pages</h3>
<ul>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group/deleteByolAttribute">Virtual_Guest_Block_Device_Template_Group::deleteByolAttribute()</a></li>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group/addByolAttribute">Virtual_Guest_Block_Device_Template_Group::addByolAttribute()</a></li>
</ul>
<h2 id="disableenable-cloudinit">Disable/Enable CloudInit</h2>
<p>Sets the Cloud Init Attribute for an Image Template</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp

<span style="color:#75715e"># The image template which you wish more details</span>
imageTemplateId <span style="color:#f92672">=</span> <span style="color:#ae81ff">1796623</span>

<span style="color:#75715e"># Declaring the API client</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>create_client_from_env()
<span style="color:#66d9ef">try</span>:
    <span style="color:#75715e"># calling the deleteCloudInitAttribute to disable cloudInit, this will return a boolean.</span>

    <span style="color:#75715e"># DISABLE</span>
    result <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">deleteCloudInitAttribute</span><span style="color:#e6db74">&#39;</span>,
        id<span style="color:#f92672">=</span>imageTemplateId
    )
    <span style="color:#75715e"># ENABLE</span>
    result <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">addCloudInitAttribute</span><span style="color:#e6db74">&#39;</span>,
        id<span style="color:#f92672">=</span>imageTemplateId
    )
    pp(result)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Unable to delete cloudInit on image template: </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultCode= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultString= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span>
          <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))

</code></pre></div><h3 id="important-manual-pages6">Important Manual Pages</h3>
<ul>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group/deleteCloudInitAttribute">Virtual_Guest_Block_Device_Template_Group::deleteCloudInitAttribute</a></li>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest_Block_Device_Template_Group/addCloudInitAttribute">Virtual_Guest_Block_Device_Template_Group::addCloudInitAttribute</a></li>
</ul>
<h2 id="get-package-and-items-from-image">Get Package and Items from Image</h2>
<p>Will return a list of packages that this image template can be ordered on.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp

<span style="color:#75715e"># Declare the image template id</span>
imageTemplateId <span style="color:#f92672">=</span> <span style="color:#ae81ff">429428</span>

<span style="color:#75715e"># Create a client instance</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>Client()

<span style="color:#75715e"># Build a SoftLayer_VIrtual_Guest_Block_Device_Template_Group object</span>
imageTemplate <span style="color:#f92672">=</span> {<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#34;</span>: imageTemplateId}
<span style="color:#66d9ef">try</span>:
    packages <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Product_Package</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getAvailablePackagesForImageTemplate</span><span style="color:#e6db74">&#39;</span>,
        imageTemplate
    )
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">============= PACKAGES ============</span><span style="color:#e6db74">&#34;</span>)
    pp(packages)

    <span style="color:#66d9ef">for</span> package <span style="color:#f92672">in</span> packages:
        <span style="color:#75715e"># If you already know the package you want to order from, you dont need to iterate through all possible packages.</span>
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">============= ITEMS for </span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> ============</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(package[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>]))
        items <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
            <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Product_Package</span><span style="color:#e6db74">&#39;</span>,
            <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getItemsFromImageTemplate</span><span style="color:#e6db74">&#39;</span>,
            imageTemplate,
            id<span style="color:#f92672">=</span>package[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>]
        )
        pp(items)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Unable to get available packages for an image faultCode=</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, faultString=</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))
    exit(<span style="color:#ae81ff">1</span>)

</code></pre></div><p>A example with nicer output.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#75715e"># So we can talk to the SoftLayer API:</span>
<span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> prettytable <span style="color:#f92672">import</span> PrettyTable


<span style="color:#75715e"># Declare the image template id</span>
imageTemplateId <span style="color:#f92672">=</span> <span style="color:#ae81ff">33566</span>
<span style="color:#75715e"># Create a client instance</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>Client()
<span style="color:#75715e"># Build a SoftLayer_VIrtual_Guest_Block_Device_Template_Group object</span>
imageTemplate <span style="color:#f92672">=</span> {<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#34;</span>: imageTemplateId}

<span style="color:#75715e"># Declare an object mask to get prices for items</span>
priceMask <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">mask[pricingLocationGroup[locations]]</span><span style="color:#e6db74">&#39;</span>


<span style="color:#75715e"># Get available packages for the image template</span>
packages <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Product_Package</span><span style="color:#e6db74">&#39;</span>,
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getAvailablePackagesForImageTemplate</span><span style="color:#e6db74">&#39;</span>,
    imageTemplate
)
<span style="color:#66d9ef">for</span> package <span style="color:#f92672">in</span> packages:
    <span style="color:#75715e"># Build table</span>
    x <span style="color:#f92672">=</span> PrettyTable([<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Price Id</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Item Id</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Description</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Datacenters</span><span style="color:#e6db74">&#34;</span>])
    x<span style="color:#f92672">.</span>align[<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Price Id</span><span style="color:#e6db74">&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">l</span><span style="color:#e6db74">&#34;</span>  <span style="color:#75715e"># Left align city names</span>
    x<span style="color:#f92672">.</span>padding_width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">***** Package: </span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> *****</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">%</span> package[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>])
    <span style="color:#75715e"># Get Item Prices, in order to verify the active prices</span>
    itemPrices <span style="color:#f92672">=</span> client[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Product_Package</span><span style="color:#e6db74">&#39;</span>]<span style="color:#f92672">.</span>getItemPrices(id<span style="color:#f92672">=</span>package[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>], mask<span style="color:#f92672">=</span>priceMask)
    <span style="color:#75715e"># Get Items from the image template</span>
    items <span style="color:#f92672">=</span> client[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Product_Package</span><span style="color:#e6db74">&#39;</span>]<span style="color:#f92672">.</span>getItemsFromImageTemplate(imageTemplate, id<span style="color:#f92672">=</span>package[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>])
    <span style="color:#75715e"># We define a item verification, in order to avoid duplicate data in the loop</span>
    itemVerication <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> items:
        <span style="color:#66d9ef">if</span> item[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>] <span style="color:#f92672">!=</span> itemVerication:
            <span style="color:#66d9ef">for</span> itemPrice <span style="color:#f92672">in</span> itemPrices:
                <span style="color:#66d9ef">if</span> itemPrice[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">item</span><span style="color:#e6db74">&#39;</span>][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>] <span style="color:#f92672">==</span> item[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>]:
                    locationDC <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">&#39;</span>
                    pack <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">&#39;</span>
                    <span style="color:#66d9ef">if</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">pricingLocationGroup</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">in</span> itemPrice:
                        <span style="color:#66d9ef">for</span> locations <span style="color:#f92672">in</span> itemPrice[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">pricingLocationGroup</span><span style="color:#e6db74">&#39;</span>][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">locations</span><span style="color:#e6db74">&#39;</span>]:
                            locationDC <span style="color:#f92672">=</span> locationDC <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74"> </span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> locations[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">longName</span><span style="color:#e6db74">&#39;</span>]
                    <span style="color:#66d9ef">else</span>:
                        locationDC <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Standard price</span><span style="color:#e6db74">&#39;</span>
                    x<span style="color:#f92672">.</span>add_row([itemPrice[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>], itemPrice[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">item</span><span style="color:#e6db74">&#39;</span>][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>], itemPrice[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">item</span><span style="color:#e6db74">&#39;</span>][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">description</span><span style="color:#e6db74">&#39;</span>], locationDC])
            itemVerication <span style="color:#f92672">=</span> item[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>]
    <span style="color:#66d9ef">print</span>(x)


</code></pre></div><h3 id="important-manual-pages7">Important manual pages:</h3>
<ul>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Product_Package/getAvailablePackagesForImageTemplate">SoftLayer_Product_Package::getAvailablePackagesForImageTemplate()</a></li>
<li><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Product_Package/getItemsFromImageTemplate">SoftLayer_Product_Package::getItemsFromImageTemplate()</a></li>
</ul>
<h2 id="shareunshare-template">Share/Unshare Template</h2>
<p>The script shares an image template to another account.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp

<span style="color:#75715e"># The image template which you wish to share</span>
imageTemplateId <span style="color:#f92672">=</span> <span style="color:#ae81ff">1796623</span>

<span style="color:#75715e"># the account you wish to share the image template</span>
accountToShare <span style="color:#f92672">=</span> <span style="color:#ae81ff">207819</span>

<span style="color:#75715e"># Declare the API client</span>
client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>create_client_from_env()
<span style="color:#66d9ef">try</span>:
    <span style="color:#75715e"># Calling the permitSharingAccess method to share the image template</span>

    <span style="color:#75715e"># PERMIT</span>
    result <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">permitSharingAccess</span><span style="color:#e6db74">&#39;</span>,
        accountToShare, id<span style="color:#f92672">=</span>imageTemplateId
        )

    <span style="color:#75715e"># DENY</span>
    result <span style="color:#f92672">=</span> client<span style="color:#f92672">.</span>call(
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Virtual_Guest_Block_Device_Template_Group</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">denySharingAccess</span><span style="color:#e6db74">&#39;</span>,
        accountToShare, id<span style="color:#f92672">=</span>imageTemplateId
        )
    pp(result)
<span style="color:#66d9ef">except</span> SoftLayer<span style="color:#f92672">.</span>SoftLayerAPIError <span style="color:#66d9ef">as</span> e:
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    # If there was an error returned from the SoftLayer API then bomb out with the</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    # error message.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Unable to share the image template. </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultCode= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">faultString= </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span>
          <span style="color:#f92672">%</span> (e<span style="color:#f92672">.</span>faultCode, e<span style="color:#f92672">.</span>faultString))

</code></pre></div>
            </div>
        </div>

    </div>
    <hr>
    <div class="row">
            
        <div class="col-md-6">
            
<div class="panel panel-default">
    <div class="panel-heading" style="padding: 2px 15px;">
        <h4>More Documentation</h4>
    </div>
    <div class="panel-body">
        <a href="https://softlayer.github.com/reference/softlayerapi"><i class="fa fa-link"></i> SoftLayer API Reference<br></a>
        <a href="https://github.com/softlayer/softlayer-java"><i class="fab fa-github"></i> softlayer-java<br></a>
        <a href="https://github.com/softlayer/softlayer-api-perl-client"><i class="fab fa-github"></i> softlayer-perl<br></a>
        <a href="https://github.com/softlayer/softlayer-api-php-client"><i class="fab fa-github"></i> softlayer-php<br></a>
        <a href="https://github.com/softlayer/softlayer-python"><i class="fab fa-github"></i> softlayer-python<br></a>
        <a href="https://github.com/softlayer/softlayer-ruby"><i class="fab fa-github"></i> softlayer-ruby<br></a>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading text-center" style="padding: 2px 15px;">
      <a href="https://www.facebook.com/IBMBluemixIaaS/"><i class="fab fa-facebook-square" alt="facebook"></i> </a>
      <a href="https://twitter.com/IBMBluemixIaaS"><i class="fab fa-twitter" alt="twitter"></i> </a>
      <a href="http://www.linkedin.com/company/softlayer-technologies-inc-" alt="linked-in"><i class="fab fa-linkedin"></i> </a>
      <a href="https://github.com/softlayer/softlayer.github.io"><i class="fab fa-github" alt="github"></i> </a>

    </div>
</div>

        </div>
        <div class="col-md-6">
            <div class="well well-sm" style="word-wrap: break-word;"> 
                <strong>Feedback? <span class="fa fa-comment"/></strong>
                    <p>
                        We would love to hear it<br>
                        <a class="" href="https://github.com/softlayer/api_examples/issues/new?title=Feedback%20for%20python%20-%20Managing%20Image%20Templates&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2fpython%2fManage_Image_Templates%2f"><span class="fa fa-github-square"/> Open an issue</a>
                    </p>
            </div>
        </div>

    </div>
        <footer>
            <div class="row">
                <hr>
                <div class="col-sm-12">
                    <p>&copy; SoftLayer 2015<br>
                    Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
                </div>
            </div>
        </footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>
