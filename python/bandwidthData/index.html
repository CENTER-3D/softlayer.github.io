<!doctype html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoftLayer API Examples, implementations, and release notes.">
    <meta name="author" content="SoftLayer">

    <title>Bandwidth Usage Reports - https://sldn.softlayer.com/</title>
    <link rel="canonical" href="https://sldn.softlayer.com/python/bandwidthData/">
        <link href="https://sldn.softlayer.com/css/main.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/bootstrap.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/fa-svg-with-js.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/custom.css" rel="stylesheet">
    <link href="https://sldn.softlayer.com/css/highlight/solarized_dark.css" rel="stylesheet">

    <script src="https://sldn.softlayer.com/js/highlight.pack.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="https://sldn.softlayer.com/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato" />
            

    <script src="https://sldn.softlayer.com/js/jquery-3.3.1.min.js"></script> 
    <script src="https://sldn.softlayer.com/js/sldn.js"></script>
    <script src="https://sldn.softlayer.com/js/fontawesome-all.js"></script>

    <script>
		$(document).ready(function() {
			$('table').addClass("table table-hover table-striped")
		})
	</script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-88235803-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://sldn.softlayer.com/">SoftLayer API</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    
                        <li><a href="https://sldn.softlayer.com/article/">Articles</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/reference/softlayerapi">Documentation</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/go/">Go</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/java/">Java</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/perl/">Perl</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/php/">PHP</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/python/">Python</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/rest/">Rest</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/ruby/">Ruby</a></li>
                    
                        <li><a href="https://sldn.softlayer.com/tools/">Tools</a></li>
                    

                    
                </ul>
                <div id="custom-search-input" class="pull-right">
                  <form class="navbar-form" role="search" method="get" action="https://www.bing.com/search">
                    <div class="input-group col-md-12">
                      <input type="text" class="form-control input-md" placeholder="Search" name="q" id="srch-term">
                      <input type="hidden" name="q1" value="site:sldn.softlayer.com" />
                      <div class="input-group-btn">
                        <button class="btn btn-info" type="submit">
                          <i class="glyphicon glyphicon-search"></i>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
        </div>
    </nav>

<div class="container">
    <div class="row">
    
        <div class="col-md-3">
            <div style="word-wrap: break-word;"> 
                <h4>February 13, 2019<br></h4>
            </div>
        </div>
        <div class="col-md-9">

                <strong>Classes <span class="fa fa-book"/></strong>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Metric_Tracking_Object">SoftLayer_Metric_Tracking_Object</a>
                
                    <a class="label label-primary" href="https://sldn.softlayer.com/reference/services/SoftLayer_Container_Bandwidth_GraphOutputs">SoftLayer_Container_Bandwidth_GraphOutputs</a>
                
                <br>
                <strong>Tags <span class="fa fa-tags"/></strong>
                
                    <a class="label label-danger" href="https://sldn.softlayer.com/tags/bandwidth">bandwidth</a>
                          
        </div>
    </div>
    <hr>
    <div class="row">
		<div class="col-md-12">
            <div class="well well-sm  article" style="word-wrap: break-word;">
                <div class="article-title">
				    <h1>Bandwidth Usage Reports</h1>
                    <small>Lists each server and virtual guest on an account, and their bandwidth usage throughout the given time period.</small>
                </div>
				
                
				
                <h3 id="data-time-alignment">Data Time Alignment</h3>
<p>The <a href="https://sldn.softlayer.com/reference/services/SoftLayer_Metric_Tracking_Object/">SoftLayer_Metric_TrackingObject</a> class will auto-align your requested time to its nearest data collection boundary.</p>
<p>For example, if you wanted bandwidth data from <code>2019-02-03T00:30:00</code> to <code>2019-02-04T00:30:01</code> with a 3600s rollup, you would get data back from <code>2019-02-03T01:00:00</code> to <code>2019-02-04T00:00:00</code></p>
<p>This is especially problematic when requesting rollups for 12 and 24 hour periods. For these, the collection boundary starts at 00:00 UTC. So if you are in CST timezone for example, your request of data from <code>2019-02-03T00:00:00</code> to <code>2019-02-04T00:00:00</code> will get aligned to <code>2019-02-03T18:00:00-06:00</code> and <code>2019-02-03T18:00:00-06:00</code></p>
<p>So if you are interested in daily values of your bandwidth, make sure to understand you should send in your requests in UTC so everything aligns to what you requested. This script does this for you, which should hopefully help.</p>
<p><em>NOTE</em> Bandwidth from the Metric_TrackingObject is going to be in <code>octets</code>, or bytes.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74"> Softlayer Stores in octets (bytes), sizes printed are in Giga Bytes (octets / 1024^3)</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">Sum values are a running total for the time period requested.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span>
 
<span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp
<span style="color:#f92672">import</span> logging
<span style="color:#f92672">import</span> datetime
<span style="color:#f92672">import</span> calendar
<span style="color:#f92672">import</span>  click
 
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dateToEpoch</span>(ctx, param, value):
    <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">A handy function to take a </span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">YYYY-MM-DD</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74"> date and return a datetime object</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">    </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
    <span style="color:#66d9ef">try</span>:
        datetime_object <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>strptime(value, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#39;</span>)
        datetime_object<span style="color:#f92672">.</span>replace(tzinfo<span style="color:#f92672">=</span>datetime<span style="color:#f92672">.</span>timezone<span style="color:#f92672">.</span>utc)
        <span style="color:#66d9ef">return</span> datetime_object
    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">ValueError</span>:
        <span style="color:#66d9ef">raise</span> click<span style="color:#f92672">.</span>BadParameter(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Unable to parse date: </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">%</span> value)
 
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">example</span>():
 
    <span style="color:#66d9ef">def</span> __init__(self, start, end):
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">       :param int start: epoch time to start at. Should align to 00:00 UTC</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">       :param int end: epoch time to end at. Should align to 00:00 UTC</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">       </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
        self<span style="color:#f92672">.</span>client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>Client()
        debugger <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>DebugTransport(self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>transport)
        self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>transport <span style="color:#f92672">=</span> debugger
        self<span style="color:#f92672">.</span>start <span style="color:#f92672">=</span> start
        self<span style="color:#f92672">.</span>end <span style="color:#f92672">=</span> end
 
        <span style="color:#75715e"># logger = logging.getLogger()</span>
        <span style="color:#75715e"># logger.addHandler(logging.StreamHandler())</span>
   
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">debug</span>(self):
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">        Useful for printing out the exact API calls that were used. If using the rest transport, will print cure-able commands.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">        </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
        <span style="color:#66d9ef">for</span> call <span style="color:#f92672">in</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>transport<span style="color:#f92672">.</span>get_last_calls():
            <span style="color:#66d9ef">print</span>(self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>transport<span style="color:#f92672">.</span>print_reproduceable(call))
 
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>(self):
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">        Goes through the server and virtualGuest list of servers. Uses pagination to step through large server lists.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">        </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Getting reports from </span><span style="color:#e6db74">%s</span><span style="color:#e6db74"> -&gt; </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (self<span style="color:#f92672">.</span>start, self<span style="color:#f92672">.</span>end))
        mask <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">mask[id,hostname,fullyQualifiedDomainName,metricTrackingObject[id]]</span><span style="color:#e6db74">&#34;&#34;&#34;</span>
        servers <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Account</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getHardware</span><span style="color:#e6db74">&#39;</span>, mask<span style="color:#f92672">=</span>mask, iter<span style="color:#f92672">=</span>True, limit<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>)
        <span style="color:#66d9ef">for</span> server <span style="color:#f92672">in</span> servers:
            <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> server[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">fullyQualifiedDomainName</span><span style="color:#e6db74">&#39;</span>])
            data <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>getBWReport(server[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">metricTrackingObject</span><span style="color:#e6db74">&#39;</span>][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>])
            self<span style="color:#f92672">.</span>detailedReport(server, data)
 
        guests <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Account</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getVirtualGuests</span><span style="color:#e6db74">&#39;</span>, mask<span style="color:#f92672">=</span>mask, iter<span style="color:#f92672">=</span>True, limit<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>)
        <span style="color:#66d9ef">for</span> server <span style="color:#f92672">in</span> guests:
            <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> server[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">fullyQualifiedDomainName</span><span style="color:#e6db74">&#39;</span>])
            data <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>getBWReport(server[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">metricTrackingObject</span><span style="color:#e6db74">&#39;</span>][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>])
            self<span style="color:#f92672">.</span>detailedReport(server, data)
 
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">detailedReport</span>(self, server, data):
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">Prints out the collected data, does sime date formatting to make it look nice. </span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">        This bit only works in py3.7 because it supports the -06:00 TZ format (part of </span><span style="color:#e6db74">%</span><span style="color:#e6db74">z). If you are not using py3.7, you could just print out the date as is, which would be in your local timezone.</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">        </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Start Date             , End Data               , In , Out, In Sum, Out Sum</span><span style="color:#e6db74">&#34;</span>)
        bw_data <span style="color:#f92672">=</span> {}
        total_in <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
        total_out <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">for</span> point <span style="color:#f92672">in</span> data:
            start_date <span style="color:#f92672">=</span> point[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">dateTime</span><span style="color:#e6db74">&#39;</span>]
            counter <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>convert(point[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">counter</span><span style="color:#e6db74">&#39;</span>])
            <span style="color:#66d9ef">if</span> point[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">type</span><span style="color:#e6db74">&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">publicIn_net_octet</span><span style="color:#e6db74">&#39;</span>:
                bw_data[start_date] <span style="color:#f92672">=</span> {<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">in</span><span style="color:#e6db74">&#39;</span>: counter}
            <span style="color:#66d9ef">elif</span> point[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">type</span><span style="color:#e6db74">&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">publicOut_net_octet</span><span style="color:#e6db74">&#39;</span>:
                bw_data[start_date][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">out</span><span style="color:#e6db74">&#39;</span>] <span style="color:#f92672">=</span> counter
        <span style="color:#66d9ef">for</span> point <span style="color:#f92672">in</span> bw_data:
            <span style="color:#75715e"># make a datetime object out of the date SL gave us, convert it BACK to UTC</span>
            start_date <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>strptime(point, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">T</span><span style="color:#e6db74">%</span><span style="color:#e6db74">H:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">M:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">S</span><span style="color:#e6db74">%</span><span style="color:#e6db74">z</span><span style="color:#e6db74">&#39;</span>)<span style="color:#f92672">.</span>astimezone(datetime<span style="color:#f92672">.</span>timezone<span style="color:#f92672">.</span>utc)
            <span style="color:#75715e"># since our rollup is 86400, our end date is + 86400 sceonds</span>
            end_date <span style="color:#f92672">=</span> start_date <span style="color:#f92672">+</span> datetime<span style="color:#f92672">.</span>timedelta(seconds<span style="color:#f92672">=</span><span style="color:#ae81ff">86400</span>)
            total_in <span style="color:#f92672">=</span> round(total_in <span style="color:#f92672">+</span> float(bw_data[point][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">in</span><span style="color:#e6db74">&#39;</span>]),<span style="color:#ae81ff">4</span>)
            total_out <span style="color:#f92672">=</span> round(total_out <span style="color:#f92672">+</span> float(bw_data[point][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">out</span><span style="color:#e6db74">&#39;</span>]),<span style="color:#ae81ff">4</span>)
            <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">, </span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> (
                start_date<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74"> </span><span style="color:#e6db74">%</span><span style="color:#e6db74">H:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">M:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">S </span><span style="color:#e6db74">%</span><span style="color:#e6db74">Z</span><span style="color:#e6db74">&#34;</span>),
                end_date<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74"> </span><span style="color:#e6db74">%</span><span style="color:#e6db74">H:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">M:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">S </span><span style="color:#e6db74">%</span><span style="color:#e6db74">Z</span><span style="color:#e6db74">&#34;</span>),
                bw_data[point][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">in</span><span style="color:#e6db74">&#39;</span>],
                bw_data[point][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">out</span><span style="color:#e6db74">&#39;</span>],
                total_in,
                total_out)
            )
 
 
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getBWReport</span>(self, tracking_id):
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">        start and end here are getting converted to epoch time so we don</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">t have to worry about properly specifying a timezone. </span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">        </span><span style="color:#e6db74">&#34;&#34;&#34;</span>
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">getBWReport</span><span style="color:#e6db74">&#34;</span>)
        start <span style="color:#f92672">=</span> calendar<span style="color:#f92672">.</span>timegm(self<span style="color:#f92672">.</span>start<span style="color:#f92672">.</span>timetuple())
        end <span style="color:#f92672">=</span> calendar<span style="color:#f92672">.</span>timegm(self<span style="color:#f92672">.</span>end<span style="color:#f92672">.</span>timetuple())
        data <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Metric_Tracking_Object</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getBandwidthData</span><span style="color:#e6db74">&#39;</span>, start, end, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">public</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">86400</span>, id<span style="color:#f92672">=</span>tracking_id)
        <span style="color:#75715e"># pp(data)</span>
        <span style="color:#66d9ef">return</span> data

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">convert</span>(self, bytes):
        <span style="color:#66d9ef">return</span>  round(int(bytes) <span style="color:#f92672">/</span> (<span style="color:#ae81ff">1024</span> <span style="color:#f92672">*</span><span style="color:#f92672">*</span><span style="color:#ae81ff">3</span> ),<span style="color:#ae81ff">2</span>)
 
<span style="color:#a6e22e">@click.command</span>()
<span style="color:#a6e22e">@click.option</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">--start</span><span style="color:#e6db74">&#39;</span>, default<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">2019-01-01</span><span style="color:#e6db74">&#39;</span>, help<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Start date, YYYY-MM-DD</span><span style="color:#e6db74">&#39;</span>, callback<span style="color:#f92672">=</span>dateToEpoch)
<span style="color:#a6e22e">@click.option</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">--end</span><span style="color:#e6db74">&#39;</span>, default<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">2019-02-01</span><span style="color:#e6db74">&#39;</span>, help<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">End Date, YYYY-MM-DD</span><span style="color:#e6db74">&#39;</span>, callback<span style="color:#f92672">=</span>dateToEpoch)
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>(start, end):
    main <span style="color:#f92672">=</span> example(start, end)
    main<span style="color:#f92672">.</span>main()
    <span style="color:#75715e"># Uncomment this to print out the API calls made.</span>
    <span style="color:#75715e">#main.debug()</span>
 
<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">__main__</span><span style="color:#e6db74">&#34;</span>:
    main()

</code></pre></div><h3 id="rest-calls-made">REST Calls made</h3>
<p>Get server list, with tracking object Ids</p>
<pre><code>curl -u $SL_USER:$SL_APIKEY -X GET 'https://api.softlayer.com/rest/v3.1/SoftLayer_Account/getHardware.json?objectMask=mask%5Bid%2Chostname%2CfullyQualifiedDomainName%2CmetricTrackingObject%5Bid%5D%5D&amp;resultLimit=0%2C2'
</code></pre><p>Get bandwidth data</p>
<pre><code>curl -u $SL_USER:$SL_APIKEY -X POST  -d '{&quot;parameters&quot;: [1546300800, 1548979200, &quot;public&quot;, 86400]}' 'https://api.softlayer.com/rest/v3.1/SoftLayer_Metric_Tracking_Object/26570093/getBandwidthData.json'
</code></pre><h3 id="summary-reports">Summary Reports</h3>
<p>Possible values for <a href="https://sldn.softlayer.com/reference/datatypes/SoftLayer_Container_Metric_Data_Type/">Metric_Data_Type</a>. All summaryTypes must be the same for each request.</p>
<h4 id="keyname">KeyName</h4>
<ul>
<li>PUBLICIN</li>
<li>PUBLICOUT</li>
<li>PRIVATEIN</li>
<li>PRIVATEOUT</li>
</ul>
<h4 id="summarytype">summaryType</h4>
<ul>
<li>items</li>
<li>min</li>
<li>max</li>
<li>average</li>
<li>sum</li>
<li>timeaverage</li>
</ul>
<p><em>NOTE</em> When sending in a string time to the API, it is assumed the time is in CST/CDT. Use epoch time if you specifically want the data from a different timezone.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp
<span style="color:#f92672">import</span> datetime

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">example</span>():
    <span style="color:#66d9ef">def</span> __init__(self):
        self<span style="color:#f92672">.</span>client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>Client()

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getSummaryReport</span>(self, tracking_id, start_date, end_date, types<span style="color:#f92672">=</span>None, summaryPeriod<span style="color:#f92672">=</span><span style="color:#ae81ff">3600</span>):
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">Gets a nice summary bandwidth report</span><span style="color:#e6db74">&#34;&#34;&#34;</span>
        <span style="color:#66d9ef">if</span> types <span style="color:#f92672">is</span> None:
            types <span style="color:#f92672">=</span> [{
                <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">keyName</span><span style="color:#e6db74">&#39;</span>: <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">PUBLICIN</span><span style="color:#e6db74">&#39;</span>,
                <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">summaryType</span><span style="color:#e6db74">&#39;</span>: <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">sum</span><span style="color:#e6db74">&#39;</span>
            }]
        data <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Metric_Tracking_Object</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getSummaryData</span><span style="color:#e6db74">&#39;</span>, start_date, end_date, types, summaryPeriod, id<span style="color:#f92672">=</span>tracking_id)
        <span style="color:#66d9ef">return</span> data

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getHardwareTrackingId</span>(self, hardware_id):
        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Hardware_Server</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getMetricTrackingObject</span><span style="color:#e6db74">&#39;</span>, id<span style="color:#f92672">=</span>hardware_id)
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getVirtualTrackingId</span>(self, vsi_id):
        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Virtual_Guest</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getMetricTrackingObject</span><span style="color:#e6db74">&#39;</span>, id<span style="color:#f92672">=</span>vsi_id)
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">convert</span>(self, bytes):
        <span style="color:#66d9ef">return</span>  round(int(bytes) <span style="color:#f92672">/</span> (<span style="color:#ae81ff">1024</span> <span style="color:#f92672">*</span><span style="color:#f92672">*</span><span style="color:#ae81ff">3</span> ),<span style="color:#ae81ff">2</span>)

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">__main__</span><span style="color:#e6db74">&#34;</span>:
    vsi_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">75764043</span>
    main <span style="color:#f92672">=</span> example()
    trackingObject <span style="color:#f92672">=</span> main<span style="color:#f92672">.</span>getVirtualTrackingId(vsi_id)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Tracking ID is {}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(trackingObject<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>)))

    start_date <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>today()
    end_date <span style="color:#f92672">=</span> start_date <span style="color:#f92672">+</span> datetime<span style="color:#f92672">.</span>timedelta(days<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
    time_format <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#34;</span>
    <span style="color:#75715e"># image = main.getGraph(trackingObject.get(&#39;id&#39;), start_date.strftime(time_format), end_date.strftime(time_format))</span>

    <span style="color:#75715e"># print(&#34;Graph Title: {}&#34;.format(image.get(&#39;graphTitle&#39;)))</span>
    <span style="color:#75715e"># main.saveImage(image)</span>
    summary_types <span style="color:#f92672">=</span> [
        {<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">keyName</span><span style="color:#e6db74">&#34;</span>: <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">PUBLICIN</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">summaryType</span><span style="color:#e6db74">&#34;</span>: <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">sum</span><span style="color:#e6db74">&#34;</span>},
        {<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">keyName</span><span style="color:#e6db74">&#34;</span>: <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">PUBLICOUT</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">summaryType</span><span style="color:#e6db74">&#34;</span>: <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">sum</span><span style="color:#e6db74">&#34;</span>}
    ]
    summary <span style="color:#f92672">=</span> main<span style="color:#f92672">.</span>getSummaryReport(trackingObject<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>), start_date<span style="color:#f92672">.</span>strftime(time_format), end_date<span style="color:#f92672">.</span>strftime(time_format), summary_types)

    <span style="color:#75715e"># Print out a daily summary of the summary...</span>
    i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">while</span> i <span style="color:#f92672">&lt;</span> len(summary):
        <span style="color:#75715e"># Get the time, convert to UTC to avoid confusion.</span>
        <span style="color:#75715e"># %z only works in py3.7+. You may have to mangle the TZ data otherwise.</span>
        the_date <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>strptime(summary[i][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">dateTime</span><span style="color:#e6db74">&#39;</span>], <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">T</span><span style="color:#e6db74">%</span><span style="color:#e6db74">H:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">M:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">S</span><span style="color:#e6db74">%</span><span style="color:#e6db74">z</span><span style="color:#e6db74">&#39;</span>)<span style="color:#f92672">.</span>astimezone(datetime<span style="color:#f92672">.</span>timezone<span style="color:#f92672">.</span>utc)
        <span style="color:#66d9ef">print</span>(the_date<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74"> </span><span style="color:#e6db74">%</span><span style="color:#e6db74">H:</span><span style="color:#e6db74">%</span><span style="color:#e6db74">M</span><span style="color:#e6db74">&#34;</span>))
        output <span style="color:#f92672">=</span> []
        <span style="color:#66d9ef">for</span> sum_type <span style="color:#f92672">in</span> summary_types:
            text <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{}: {} MB</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(sum_type[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">keyName</span><span style="color:#e6db74">&#39;</span>], main<span style="color:#f92672">.</span>convert(summary[i][<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">counter</span><span style="color:#e6db74">&#39;</span>]))
            output<span style="color:#f92672">.</span>append(text)
            i <span style="color:#f92672">=</span> i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">, </span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>join(output))

</code></pre></div><h3 id="simple-server-bandwidth">Simple Server Bandwidth</h3>
<p>This example just gets the current billing cycle usage for a given server.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">import</span> pprint

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">example</span>():

    <span style="color:#66d9ef">def</span> __init__(self):
        self<span style="color:#f92672">.</span>client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>Client()

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>(self):
        pp <span style="color:#f92672">=</span> pprint<span style="color:#f92672">.</span>PrettyPrinter(indent<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
        theMask <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">mask[inboundPrivateBandwidthUsage,inboundPublicBandwidthUsage,outboundPrivateBandwidthUsage,outboundPublicBandwidthUsage]</span><span style="color:#e6db74">&#34;</span>
        result <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>client[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Account</span><span style="color:#e6db74">&#39;</span>]<span style="color:#f92672">.</span>getHardware()
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">server_name,public_in,public_out,private_in,private_out</span><span style="color:#e6db74">&#34;</span>
        
        <span style="color:#66d9ef">for</span> server <span style="color:#f92672">in</span> result:
            <span style="color:#75715e">#getHardware() only returns SoftLayer_Hardware, which doesn&#39;t have the private bw usage metrics, for some reason.</span>
            <span style="color:#75715e"># So we just use SoftLayer_Hardware_Server here, which has more detailed information</span>
            serverInfo <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>client[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Hardware_Server</span><span style="color:#e6db74">&#39;</span>]<span style="color:#f92672">.</span>getObject(id<span style="color:#f92672">=</span>server[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>],mask<span style="color:#f92672">=</span>theMask)

            <span style="color:#75715e"># use .get() to avoid exceptions</span>
            pubin <span style="color:#f92672">=</span> serverInfo<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">inboundPublicBandwidthUsage</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">--</span><span style="color:#e6db74">&#39;</span>)
            pubout <span style="color:#f92672">=</span> serverInfo<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">outboundPublicBandwidthUsage</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">--</span><span style="color:#e6db74">&#39;</span>)
            privin <span style="color:#f92672">=</span>serverInfo<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">inboundPrivateBandwidthUsage</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">--</span><span style="color:#e6db74">&#39;</span>)
            privout <span style="color:#f92672">=</span> serverInfo<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">outboundPrivateBandwidthUsage</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">--</span><span style="color:#e6db74">&#39;</span>)

            <span style="color:#66d9ef">print</span>(serverInfo[<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">fullyQualifiedDomainName</span><span style="color:#e6db74">&#39;</span>] <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">,</span><span style="color:#e6db74">&#34;</span>),
            <span style="color:#66d9ef">print</span>(pubin <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">,</span><span style="color:#e6db74">&#34;</span>),
            <span style="color:#66d9ef">print</span>(pubout <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">,</span><span style="color:#e6db74">&#34;</span>),
            <span style="color:#66d9ef">print</span>(privin <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">,</span><span style="color:#e6db74">&#34;</span>),
            <span style="color:#66d9ef">print</span>(privout)


<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">__main__</span><span style="color:#e6db74">&#34;</span>:
    main <span style="color:#f92672">=</span> example()
    main<span style="color:#f92672">.</span>main()
</code></pre></div><h3 id="virtual-guest-getcurrentbandwidthsummary-and-getbandwidthdatabydate">Virtual Guest getCurrentBandwidthSummary and getBandwidthDataByDate</h3>
<p><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest/getBandwidthDataByDate/">getBandwidthDataByDate</a>
<a href="http://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest/getCurrentBandwidthSummary">getCurrentBandwidthSummary</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">import</span> datetime

<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">example</span>():

    <span style="color:#66d9ef">def</span> __init__(self):
        self<span style="color:#f92672">.</span>client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>Client()

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getCurrentBandwidthSummary</span>(self, vsi_id):
        summary <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Virtual_Guest</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getCurrentBandwidthSummary</span><span style="color:#e6db74">&#39;</span>, id<span style="color:#f92672">=</span>serverId)
        <span style="color:#66d9ef">return</span> summary

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getBandwidthDataByDate</span>(self, vsi_id, start_date, end_date, direction)
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">direction should be </span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">public</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">, </span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">private</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">, </span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">both</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">&#34;&#34;&#34;</span>
        template <span style="color:#f92672">=</span> {
            <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">startDateTime</span><span style="color:#e6db74">&#39;</span>: start_date,
            <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">endDateTime</span><span style="color:#e6db74">&#39;</span>: end_date,
            <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">networkType</span><span style="color:#e6db74">&#39;</span>: direction
        }
        bandwidth <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Virtual_Guest</span><span style="color:#e6db74">&#39;</span>)<span style="color:#f92672">.</span>getBandwidthDataByDate(template, id<span style="color:#f92672">=</span>vsi_id)
        <span style="color:#66d9ef">return</span> bandwidth


<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">__main__</span><span style="color:#e6db74">&#34;</span>:
    vsi_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">12345667</span>
    main <span style="color:#f92672">=</span> example()
    summary <span style="color:#f92672">=</span> main<span style="color:#f92672">.</span>getCurrentBandwidthSummary(vsi_id)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Summary</span><span style="color:#e6db74">&#34;</span>)
    pp(summary)

    start_date <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>today()
    end_date <span style="color:#f92672">=</span> start_date <span style="color:#f92672">+</span> datetime<span style="color:#f92672">.</span>timedelta(days<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
    bw_by_date <span style="color:#f92672">=</span> main<span style="color:#f92672">.</span>getBandwidthDataByDate(vsi_id, start_date, end_date)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Bandwidth By Date</span><span style="color:#e6db74">&#34;</span>)
    pp(bw_by_date)
</code></pre></div><h3 id="get-the-bandwidth-graph">Get the Bandwidth Graph</h3>
<p><a href="https://sldn.softlayer.com/reference/services/SoftLayer_Metric_Tracking_Object/getBandwidthGraph/">getBandwidthGraph</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> SoftLayer
<span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint <span style="color:#66d9ef">as</span> pp
<span style="color:#f92672">import</span> datetime
<span style="color:#f92672">import</span> base64

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">example</span>():

    <span style="color:#66d9ef">def</span> __init__(self):
        self<span style="color:#f92672">.</span>client <span style="color:#f92672">=</span> SoftLayer<span style="color:#f92672">.</span>Client()

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getGraph</span>(self, tracking_id, startDateTime, endDateTime, graphType<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">public</span><span style="color:#e6db74">&#39;</span>,
                 fontSize<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>, graphWidth<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, graphHeight<span style="color:#f92672">=</span><span style="color:#ae81ff">300</span>, doNotShowTimeZone<span style="color:#f92672">=</span>False):
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">Returns a bandwidth graph</span><span style="color:#e6db74">&#34;&#34;&#34;</span>
        image <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">SoftLayer_Metric_Tracking_Object</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getBandwidthGraph</span><span style="color:#e6db74">&#39;</span>,
                                 startDateTime, endDateTime, graphType, fontSize, graphWidth,
                                 graphHeight, doNotShowTimeZone, id<span style="color:#f92672">=</span>tracking_id)
        <span style="color:#75715e"># pp(image)</span>
        <span style="color:#66d9ef">return</span> image

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">saveImage</span>(self, image):
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">image should be data returned from getBandwidthGraph</span><span style="color:#e6db74">&#34;&#34;&#34;</span>
        <span style="color:#75715e"># Graph title will usually be the FQDN of the server</span>
        path <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{}.png</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(image<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">graphTitle</span><span style="color:#e6db74">&#39;</span>))
        <span style="color:#75715e"># open the file in write+binary mode</span>
        file <span style="color:#f92672">=</span> open(path, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">wb</span><span style="color:#e6db74">&#39;</span>)
        image_data <span style="color:#f92672">=</span> image<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">graphImage</span><span style="color:#e6db74">&#39;</span>)

        <span style="color:#75715e"># REST API returns a &#39;&#39; encapsulated string, so we need to remove those, and then base64decode</span>
        <span style="color:#66d9ef">if</span> isinstance(image_data, str):
            png <span style="color:#f92672">=</span> base64<span style="color:#f92672">.</span>b64decode(image_data<span style="color:#f92672">.</span>replace(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">&#34;</span>,<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">&#34;</span>))
        <span style="color:#75715e"># XML-RPC returns raw binary, so we just need to get its data out.</span>
        <span style="color:#66d9ef">else</span>:
            png <span style="color:#f92672">=</span> image_data<span style="color:#f92672">.</span>data

        file<span style="color:#f92672">.</span>write(png)
        file<span style="color:#f92672">.</span>close()

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getHardwareTrackingId</span>(self, hardware_id):
        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Hardware_Server</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getMetricTrackingObject</span><span style="color:#e6db74">&#39;</span>, id<span style="color:#f92672">=</span>hardware_id)
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getVirtualTrackingId</span>(self, vsi_id):
        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>client<span style="color:#f92672">.</span>call(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Virtual_Guest</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">getMetricTrackingObject</span><span style="color:#e6db74">&#39;</span>, id<span style="color:#f92672">=</span>vsi_id)

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">__main__</span><span style="color:#e6db74">&#34;</span>:
    vsi_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">75764043</span>
    main <span style="color:#f92672">=</span> example()
    trackingObject <span style="color:#f92672">=</span> main<span style="color:#f92672">.</span>getVirtualTrackingId(vsi_id)
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Tracking ID is {}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(trackingObject<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>)))

    start_date <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>datetime<span style="color:#f92672">.</span>today()
    end_date <span style="color:#f92672">=</span> start_date <span style="color:#f92672">+</span> datetime<span style="color:#f92672">.</span>timedelta(days<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
    time_format <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%</span><span style="color:#e6db74">Y-</span><span style="color:#e6db74">%</span><span style="color:#e6db74">m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#34;</span>
    image <span style="color:#f92672">=</span> main<span style="color:#f92672">.</span>getGraph(trackingObject<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">id</span><span style="color:#e6db74">&#39;</span>), start_date<span style="color:#f92672">.</span>strftime(time_format), end_date<span style="color:#f92672">.</span>strftime(time_format))

    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Graph Title: {}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(image<span style="color:#f92672">.</span>get(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">graphTitle</span><span style="color:#e6db74">&#39;</span>)))
    main<span style="color:#f92672">.</span>saveImage(image)
</code></pre></div>
            </div>
        </div>

    </div>
    <hr>
    <div class="row">
            
        <div class="col-md-6">
            
<div class="panel panel-default">
    <div class="panel-heading" style="padding: 2px 15px;">
        <h4>More Documentation</h4>
    </div>
    <div class="panel-body">
        <a href="https://softlayer.github.com/reference/softlayerapi"><i class="fa fa-link"></i> SoftLayer API Reference<br></a>
        <a href="https://github.com/softlayer/softlayer-java"><i class="fab fa-github"></i> softlayer-java<br></a>
        <a href="https://github.com/softlayer/softlayer-api-perl-client"><i class="fab fa-github"></i> softlayer-perl<br></a>
        <a href="https://github.com/softlayer/softlayer-api-php-client"><i class="fab fa-github"></i> softlayer-php<br></a>
        <a href="https://github.com/softlayer/softlayer-python"><i class="fab fa-github"></i> softlayer-python<br></a>
        <a href="https://github.com/softlayer/softlayer-ruby"><i class="fab fa-github"></i> softlayer-ruby<br></a>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading text-center" style="padding: 2px 15px;">
      <a href="https://www.facebook.com/IBMBluemixIaaS/"><i class="fab fa-facebook-square" alt="facebook"></i> </a>
      <a href="https://twitter.com/IBMBluemixIaaS"><i class="fab fa-twitter" alt="twitter"></i> </a>
      <a href="http://www.linkedin.com/company/softlayer-technologies-inc-" alt="linked-in"><i class="fab fa-linkedin"></i> </a>
      <a href="https://github.com/softlayer/softlayer.github.io"><i class="fab fa-github" alt="github"></i> </a>

    </div>
</div>

        </div>
        <div class="col-md-6">
            <div class="well well-sm" style="word-wrap: break-word;"> 
                <strong>Feedback? <span class="fa fa-comment"/></strong>
                    <p>
                        We would love to hear it<br>
                        <a class="" href="https://github.com/softlayer/api_examples/issues/new?title=Feedback%20for%20python%20-%20Bandwidth%20Usage%20Reports&body=Feedback+regarding%3A%20https%3a%2f%2fsldn.softlayer.com%2fpython%2fbandwidthData%2f"><span class="fa fa-github-square"/> Open an issue</a>
                    </p>
            </div>
        </div>

    </div>
        <footer>
            <div class="row">
                <hr>
                <div class="col-sm-12">
                    <p>&copy; SoftLayer 2015<br>
                    Built with <a href="https://github.com/spf13/hugo">Hugo</a></p>
                </div>
            </div>
        </footer>
</div>

    <script src="https://sldn.softlayer.com/js/jquery.js"></script>
    <script src="https://sldn.softlayer.com/js/bootstrap.js"></script>
</body>
</html>
